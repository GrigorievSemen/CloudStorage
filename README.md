# Дипломная работа «Облачное хранилище»
Используемый стек: Postgres, Spring Boot, Spring Security, Spring Data JPA, JUnit, Mockito, Maven, Docker.
## Описание проекта
Данный проект это - REST сервис для работы с файлами: загрузка, скачивание, удаление, переименование. 
Запросы требует предварительной авторизации.
FRONT (веб приложение) подключается к REST сервису.
## Описание запуска FRONT приложения
FRONT приложения находится в папке netology-diplom-frontend данного репозитория.
Для запуска необходимо:
1. Скачать репозиторий и распаковать его в локальную папку
2. Установить node.js версии не ниже 19.7.0, но и не выше 20.0.0
3. В папке FRONT приложения в командной строке выполнить следующие команды -  `npm install` и `npm run serve`
4. Далее открыть в браузере страницу по адресу http://localhost:8080/

Запущенное веб приложение будет отправлять запросы на адрес http://localhost:8090/, по которому будет работать REST приложение.

## Описание запуска REST приложения
REST приложения находится в папке cloudstorage данного репозитория.
Необходимо иметь установленный Docker, Maven, для выполнения команд запуска. 
1. Скачать репозиторий и распаковать его в локальную папку.
2. Проект собирается из корня командой: `mvn clean install`.
3. Далее в корне выполнить команду `docker-compose up -d`.

## Авторизация
Для авторизации в приложении ввести следующие данные: имя пользователя - `user1@yandex.com`, пароль `test1`
После этого можно выполнять действия (описанные выше) с файлами, размером до 150Мб

## Описание взаимодействия приложений
В начале работы FRONT приложение отправляет credentials в теле запроса на эндпоинт /login REST приложения.
Далее запрос проходит через CORS и CSRF filter, перехватывается JwtConfigurer и далее происходи аутентификация.
Если аутентификация успешна, то генерируется токен, который в свою очередь возвращается на FRONT с заголовком `auth-token`
Далее все запросы с FRONT происходят с этим токеном.
При выходе из приложения вызывается метод /logout REST приложения, который удаляет токен из временного хранилища и более запросы с этим токеном будут не действительны.
